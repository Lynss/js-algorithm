{
  "{\"sourceRoot\":\"/Users/lynss/frontProjects/algorithm/js_algorithm\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/lynss/frontProjects/algorithm/js_algorithm\",\"filename\":\"/Users/lynss/frontProjects/algorithm/js_algorithm/my-promise.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/lynss/frontProjects/algorithm/js_algorithm\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]}},\"options\":{}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"loose\":false}},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.5.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/lynss/frontProjects/algorithm/js_algorithm",
      "caller": {
        "name": "@babel/register"
      },
      "cwd": "/Users/lynss/frontProjects/algorithm/js_algorithm",
      "filename": "/Users/lynss/frontProjects/algorithm/js_algorithm/my-promise.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/lynss/frontProjects/algorithm/js_algorithm",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-properties",
          "visitor": {
            "PrivateName": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {}
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "transform-template-literals",
          "visitor": {
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "TemplateLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-literals",
          "visitor": {
            "NumericLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-function-name",
          "visitor": {
            "FunctionExpression": {
              "exit": [
                null
              ]
            },
            "ObjectProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-arrow-functions",
          "visitor": {
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-block-scoped-functions",
          "visitor": {
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "SwitchCase": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-classes",
          "visitor": {
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-object-super",
          "visitor": {
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-shorthand-properties",
          "visitor": {
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ObjectProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-duplicate-keys",
          "visitor": {
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-computed-properties",
          "visitor": {
            "ObjectExpression": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-for-of",
          "visitor": {
            "ForOfStatement": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-sticky-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-dotall-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-unicode-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-spread",
          "visitor": {
            "ArrayExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-parameters",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-destructuring",
          "visitor": {
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-block-scoping",
          "visitor": {
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "SwitchStatement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "_verified": true,
            "DoWhileStatement": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForStatement": {
              "enter": [
                null
              ]
            },
            "WhileStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-typeof-symbol",
          "visitor": {
            "UnaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "DoWhileStatement": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForStatement": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "SwitchStatement": {
              "enter": [
                null
              ]
            },
            "WhileStatement": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            },
            "TSModuleBlock": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-new-target",
          "visitor": {
            "MetaProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "regenerator-transform",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "ObjectMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "FunctionDeclaration": {
              "exit": [
                null
              ]
            },
            "FunctionExpression": {
              "exit": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "exit": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-exponentiation-operator",
          "visitor": {
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-async-to-generator",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-object-rest-spread",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-named-capturing-groups-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-member-expression-literals",
          "visitor": {
            "MemberExpression": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-property-literals",
          "visitor": {
            "ObjectProperty": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-reserved-words",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null,
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lynss/frontProjects/algorithm/js_algorithm/my-promise.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "dynamicImport",
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lynss/frontProjects/algorithm/js_algorithm/my-promise.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lynss/frontProjects/algorithm/js_algorithm",
        "sourceFileName": "my-promise.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PENDING = Symbol('pending');\nvar FULFILLED = Symbol('fulfilled');\nvar REJECTED = Symbol('rejected');\n\nvar MyPromise =\n/*#__PURE__*/\nfunction () {\n  function MyPromise(executor) {\n    var _this = this;\n\n    _classCallCheck(this, MyPromise);\n\n    _defineProperty(this, \"_status\", void 0);\n\n    _defineProperty(this, \"_value\", void 0);\n\n    _defineProperty(this, \"onResolveCallbacks\", []);\n\n    _defineProperty(this, \"onRejectCallbacks\", []);\n\n    _defineProperty(this, \"onResolve\", function (value) {\n      if (_this._status === PENDING) {\n        _this._status = FULFILLED;\n        _this._value = value;\n\n        _this.onResolveCallbacks.forEach(function (onResolveCallback) {\n          return onResolveCallback();\n        });\n      }\n    });\n\n    _defineProperty(this, \"onReject\", function (value) {\n      if (_this._status === PENDING) {\n        _this._status = REJECTED;\n        _this._value = value;\n\n        _this.onRejectCallbacks.forEach(function (onRejectCallback) {\n          return onRejectCallback();\n        });\n      }\n    });\n\n    this._status = PENDING;\n\n    try {\n      executor(this.onResolve, this.onReject);\n    } catch (e) {\n      this.onReject(e);\n    }\n  }\n\n  _createClass(MyPromise, [{\n    key: \"flatPromise\",\n    value: function flatPromise(targetResult) {\n      var self = this;\n\n      if (self === targetResult) {\n        self.onReject('循环引用');\n        return;\n      }\n\n      var targetType = Object.prototype.toString.call(targetResult);\n\n      if (targetType !== '[object Function]' || targetType !== '[object Object]') {\n        self.onResolve(targetResult);\n        return;\n      }\n\n      try {\n        targetResult.then(function (value) {\n          self.flatPromise(value);\n        });\n      } catch (e) {\n        self.onReject(e);\n      }\n    }\n  }, {\n    key: \"then\",\n    value: function then(onResolve, onReject) {\n      var onFulfilled = typeof onResolve === 'function' ? onResolve : function (value) {\n        return value;\n      }; //因为错误的值要让后面访问到，所以这里也要跑出个错误，不然会在之后then的resolve中捕获\n\n      var onRejected = typeof onReject === 'function' ? onReject : function (err) {\n        throw err;\n      };\n      var self = this;\n      var thenPromise = new MyPromise(function (resolve, reject) {\n        if (self._status === PENDING) {\n          self.onResolveCallbacks.push(function () {\n            setTimeout(function () {\n              try {\n                var result = onFulfilled(self._value);\n                thenPromise.flatPromise(result);\n              } catch (e) {\n                reject(e);\n              }\n            });\n          });\n          self.onRejectCallbacks.push(function () {\n            setTimeout(function () {\n              try {\n                var result = onRejected(self._value);\n                thenPromise.flatPromise(result);\n              } catch (e) {\n                reject(e);\n              }\n            });\n          });\n        } else if (thenPromise._status === FULFILLED) {\n          setTimeout(function () {\n            try {\n              var result = onFulfilled(self._value);\n              thenPromise.flatPromise(result);\n            } catch (e) {\n              reject(e);\n            }\n          });\n        } else if (thenPromise._status === REJECTED) {\n          setTimeout(function () {\n            try {\n              var result = onRejected(self._value);\n              thenPromise.flatPromise(result);\n            } catch (e) {\n              reject(e);\n            }\n          });\n        }\n      });\n      return thenPromise;\n    }\n  }, {\n    key: \"finally\",\n    value: function _finally(fn) {\n      return this.then(function (value) {\n        fn();\n        return value;\n      }, function (reason) {\n        fn();\n        throw reason;\n      });\n    }\n  }], [{\n    key: \"resolve\",\n    value: function resolve(value) {\n      return new MyPromise(function (resolve) {\n        resolve(value);\n      });\n    }\n  }, {\n    key: \"reject\",\n    value: function reject(value) {\n      return new MyPromise(function (resolve, reject) {\n        reject(value);\n      });\n    }\n  }]);\n\n  return MyPromise;\n}();\n\nvar promiseOne = new MyPromise(function (resolve, reject) {\n  setTimeout(function () {\n    if (Math.random() > 0.5) {\n      resolve('success');\n    } else {\n      reject('error');\n    }\n  }, 1000);\n});\npromiseOne.then(console.warn.bind(console), console.error.bind(console))[\"finally\"](function () {\n  return console.info('finally');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15LXByb21pc2UuanMiXSwibmFtZXMiOlsiUEVORElORyIsIlN5bWJvbCIsIkZVTEZJTExFRCIsIlJFSkVDVEVEIiwiTXlQcm9taXNlIiwiZXhlY3V0b3IiLCJ2YWx1ZSIsIl9zdGF0dXMiLCJfdmFsdWUiLCJvblJlc29sdmVDYWxsYmFja3MiLCJmb3JFYWNoIiwib25SZXNvbHZlQ2FsbGJhY2siLCJvblJlamVjdENhbGxiYWNrcyIsIm9uUmVqZWN0Q2FsbGJhY2siLCJvblJlc29sdmUiLCJvblJlamVjdCIsImUiLCJ0YXJnZXRSZXN1bHQiLCJzZWxmIiwidGFyZ2V0VHlwZSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsInRoZW4iLCJmbGF0UHJvbWlzZSIsIm9uRnVsZmlsbGVkIiwib25SZWplY3RlZCIsImVyciIsInRoZW5Qcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInB1c2giLCJzZXRUaW1lb3V0IiwicmVzdWx0IiwiZm4iLCJyZWFzb24iLCJwcm9taXNlT25lIiwiTWF0aCIsInJhbmRvbSIsImNvbnNvbGUiLCJ3YXJuIiwiYmluZCIsImVycm9yIiwiaW5mbyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQU1BLE9BQU8sR0FBR0MsTUFBTSxDQUFDLFNBQUQsQ0FBdEI7QUFDQSxJQUFNQyxTQUFTLEdBQUdELE1BQU0sQ0FBQyxXQUFELENBQXhCO0FBQ0EsSUFBTUUsUUFBUSxHQUFHRixNQUFNLENBQUMsVUFBRCxDQUF2Qjs7SUFFTUcsUzs7O0FBc0JGLHFCQUFZQyxRQUFaLEVBQXNCO0FBQUE7O0FBQUE7O0FBQUE7O0FBQUE7O0FBQUEsZ0RBbkJELEVBbUJDOztBQUFBLCtDQWxCRixFQWtCRTs7QUFBQSx1Q0FoQlYsVUFBQ0MsS0FBRCxFQUFXO0FBQ25CLFVBQUksS0FBSSxDQUFDQyxPQUFMLEtBQWlCUCxPQUFyQixFQUE4QjtBQUMxQixRQUFBLEtBQUksQ0FBQ08sT0FBTCxHQUFlTCxTQUFmO0FBQ0EsUUFB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LCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBQRU5ESU5HID0gU3ltYm9sKCdwZW5kaW5nJyk7XG5jb25zdCBGVUxGSUxMRUQgPSBTeW1ib2woJ2Z1bGZpbGxlZCcpO1xuY29uc3QgUkVKRUNURUQgPSBTeW1ib2woJ3JlamVjdGVkJyk7XG5cbmNsYXNzIE15UHJvbWlzZSB7XG4gICAgX3N0YXR1cztcbiAgICBfdmFsdWU7XG4gICAgb25SZXNvbHZlQ2FsbGJhY2tzID0gW107XG4gICAgb25SZWplY3RDYWxsYmFja3MgPSBbXTtcblxuICAgIG9uUmVzb2x2ZSA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fc3RhdHVzID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBGVUxGSUxMRUQ7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vblJlc29sdmVDYWxsYmFja3MuZm9yRWFjaChvblJlc29sdmVDYWxsYmFjayA9PiBvblJlc29sdmVDYWxsYmFjaygpKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBvblJlamVjdCA9ICh2YWx1ZSkgPT4ge1xuICAgICAgICBpZiAodGhpcy5fc3RhdHVzID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBSRUpFQ1RFRDtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLm9uUmVqZWN0Q2FsbGJhY2tzLmZvckVhY2gob25SZWplY3RDYWxsYmFjayA9PiBvblJlamVjdENhbGxiYWNrKCkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7XG4gICAgICAgIHRoaXMuX3N0YXR1cyA9IFBFTkRJTkc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBleGVjdXRvcih0aGlzLm9uUmVzb2x2ZSwgdGhpcy5vblJlamVjdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMub25SZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmbGF0UHJvbWlzZSh0YXJnZXRSZXN1bHQpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmID09PSB0YXJnZXRSZXN1bHQpIHtcbiAgICAgICAgICAgIHNlbGYub25SZWplY3QoJ+W+queOr+W8leeUqCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldFR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGFyZ2V0UmVzdWx0KTtcbiAgICAgICAgaWYgKHRhcmdldFR5cGUgIT09ICdbb2JqZWN0IEZ1bmN0aW9uXScgfHwgdGFyZ2V0VHlwZSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAgICAgIHNlbGYub25SZXNvbHZlKHRhcmdldFJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRhcmdldFJlc3VsdC50aGVuKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICBzZWxmLmZsYXRQcm9taXNlKHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBzZWxmLm9uUmVqZWN0KGUpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdGhlbihvblJlc29sdmUsIG9uUmVqZWN0KSB7XG4gICAgICAgIGNvbnN0IG9uRnVsZmlsbGVkID0gdHlwZW9mIG9uUmVzb2x2ZSA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVzb2x2ZSA6IHZhbHVlID0+IHZhbHVlO1xuICAgICAgICAvL+WboOS4uumUmeivr+eahOWAvOimgeiuqeWQjumdouiuv+mXruWIsO+8jOaJgOS7pei/memHjOS5n+imgei3keWHuuS4qumUmeivr++8jOS4jeeEtuS8muWcqOS5i+WQjnRoZW7nmoRyZXNvbHZl5Lit5o2V6I63XG4gICAgICAgIGNvbnN0IG9uUmVqZWN0ZWQgPSB0eXBlb2Ygb25SZWplY3QgPT09ICdmdW5jdGlvbicgPyBvblJlamVjdCA6IGVyciA9PiB7XG4gICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgICAgICBjb25zdCB0aGVuUHJvbWlzZSA9IG5ldyBNeVByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3N0YXR1cyA9PT0gUEVORElORykge1xuICAgICAgICAgICAgICAgIHNlbGYub25SZXNvbHZlQ2FsbGJhY2tzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb25GdWxmaWxsZWQoc2VsZi5fdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZW5Qcm9taXNlLmZsYXRQcm9taXNlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBzZWxmLm9uUmVqZWN0Q2FsbGJhY2tzLnB1c2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb25SZWplY3RlZChzZWxmLl92YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlblByb21pc2UuZmxhdFByb21pc2UocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGVuUHJvbWlzZS5fc3RhdHVzID09PSBGVUxGSUxMRUQpIHtcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9uRnVsZmlsbGVkKHNlbGYuX3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW5Qcm9taXNlLmZsYXRQcm9taXNlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGVuUHJvbWlzZS5fc3RhdHVzID09PSBSRUpFQ1RFRCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb25SZWplY3RlZChzZWxmLl92YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGVuUHJvbWlzZS5mbGF0UHJvbWlzZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiB0aGVuUHJvbWlzZTtcbiAgICB9XG5cbiAgICBmaW5hbGx5KGZuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4odmFsdWUgPT4ge1xuICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSwgcmVhc29uID0+IHtcbiAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICB0aHJvdyByZWFzb247XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBzdGF0aWMgcmVzb2x2ZSh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IE15UHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHN0YXRpYyByZWplY3QodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNeVByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5jb25zdCBwcm9taXNlT25lID0gbmV3IE15UHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBpZiAoTWF0aC5yYW5kb20oKSA+IDAuNSkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoJ3N1Y2Nlc3MnKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KCdlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgICwgMTAwMCk7XG59KTtcblxucHJvbWlzZU9uZS50aGVuKGNvbnNvbGUud2Fybi5iaW5kKGNvbnNvbGUpLCBjb25zb2xlLmVycm9yLmJpbmQoY29uc29sZSkpLmZpbmFsbHkoKCkgPT4gY29uc29sZS5pbmZvKCdmaW5hbGx5JykpOyJdfQ==",
    "map": {
      "version": 3,
      "sources": [
        "my-promise.js"
      ],
      "names": [
        "PENDING",
        "Symbol",
        "FULFILLED",
        "REJECTED",
        "MyPromise",
        "executor",
        "value",
        "_status",
        "_value",
        "onResolveCallbacks",
        "forEach",
        "onResolveCallback",
        "onRejectCallbacks",
        "onRejectCallback",
        "onResolve",
        "onReject",
        "e",
        "targetResult",
        "self",
        "targetType",
        "Object",
        "prototype",
        "toString",
        "call",
        "then",
        "flatPromise",
        "onFulfilled",
        "onRejected",
        "err",
        "thenPromise",
        "resolve",
        "reject",
        "push",
        "setTimeout",
        "result",
        "fn",
        "reason",
        "promiseOne",
        "Math",
        "random",
        "console",
        "warn",
        "bind",
        "error",
        "info"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lynss/frontProjects/algorithm/js_algorithm",
      "sourcesContent": [
        "const PENDING = Symbol('pending');\nconst FULFILLED = Symbol('fulfilled');\nconst REJECTED = Symbol('rejected');\n\nclass MyPromise {\n    _status;\n    _value;\n    onResolveCallbacks = [];\n    onRejectCallbacks = [];\n\n    onResolve = (value) => {\n        if (this._status === PENDING) {\n            this._status = FULFILLED;\n            this._value = value;\n            this.onResolveCallbacks.forEach(onResolveCallback => onResolveCallback());\n        }\n    };\n\n    onReject = (value) => {\n        if (this._status === PENDING) {\n            this._status = REJECTED;\n            this._value = value;\n            this.onRejectCallbacks.forEach(onRejectCallback => onRejectCallback());\n        }\n    };\n\n    constructor(executor) {\n        this._status = PENDING;\n        try {\n            executor(this.onResolve, this.onReject);\n        } catch (e) {\n            this.onReject(e);\n        }\n    }\n\n    flatPromise(targetResult) {\n        const self = this;\n        if (self === targetResult) {\n            self.onReject('循环引用');\n            return;\n        }\n        const targetType = Object.prototype.toString.call(targetResult);\n        if (targetType !== '[object Function]' || targetType !== '[object Object]') {\n            self.onResolve(targetResult);\n            return;\n        }\n        try {\n            targetResult.then(value => {\n                self.flatPromise(value);\n            });\n        } catch (e) {\n            self.onReject(e);\n        }\n    }\n\n    then(onResolve, onReject) {\n        const onFulfilled = typeof onResolve === 'function' ? onResolve : value => value;\n        //因为错误的值要让后面访问到，所以这里也要跑出个错误，不然会在之后then的resolve中捕获\n        const onRejected = typeof onReject === 'function' ? onReject : err => {\n            throw err;\n        };\n        const self = this;\n        const thenPromise = new MyPromise((resolve, reject) => {\n            if (self._status === PENDING) {\n                self.onResolveCallbacks.push(() => {\n                    setTimeout(() => {\n                        try {\n                            const result = onFulfilled(self._value);\n                            thenPromise.flatPromise(result);\n                        } catch (e) {\n                            reject(e);\n                        }\n                    });\n                });\n                self.onRejectCallbacks.push(() => {\n                    setTimeout(() => {\n                        try {\n                            const result = onRejected(self._value);\n                            thenPromise.flatPromise(result);\n                        } catch (e) {\n                            reject(e);\n                        }\n                    });\n                });\n            } else if (thenPromise._status === FULFILLED) {\n                setTimeout(() => {\n                    try {\n                        const result = onFulfilled(self._value);\n                        thenPromise.flatPromise(result);\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            } else if (thenPromise._status === REJECTED) {\n                setTimeout(() => {\n                    try {\n                        const result = onRejected(self._value);\n                        thenPromise.flatPromise(result);\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            }\n        });\n        return thenPromise;\n    }\n\n    finally(fn) {\n        return this.then(value => {\n            fn();\n            return value;\n        }, reason => {\n            fn();\n            throw reason;\n        });\n    };\n\n    static resolve(value) {\n        return new MyPromise((resolve) => {\n            resolve(value);\n        });\n    }\n\n    static reject(value) {\n        return new MyPromise((resolve, reject) => {\n            reject(value);\n        });\n    }\n}\n\nconst promiseOne = new MyPromise((resolve, reject) => {\n    setTimeout(() => {\n            if (Math.random() > 0.5) {\n                resolve('success');\n            } else {\n                reject('error');\n            }\n        }\n        , 1000);\n});\n\npromiseOne.then(console.warn.bind(console), console.error.bind(console)).finally(() => console.info('finally'));"
      ]
    },
    "sourceType": "script",
    "mtime": 1565749468767
  },
  "{\"sourceRoot\":\"/Users/lynss/frontProjects/algorithm/js_algorithm\",\"caller\":{\"name\":\"@babel/node\"},\"cwd\":\"/Users/lynss/frontProjects/algorithm/js_algorithm\",\"filename\":\"/Users/lynss/frontProjects/algorithm/js_algorithm/my-promise.js\",\"babelrc\":false,\"configFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/lynss/frontProjects/algorithm/js_algorithm\",\"plugins\":[{\"key\":\"proposal-class-properties\",\"visitor\":{\"PrivateName\":{\"enter\":[null]},\"ExportDefaultDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]}},\"options\":{}},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"CallExpression\":{\"enter\":[null]},\"Program\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"loose\":false}},{\"key\":\"proposal-dynamic-import\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"loose\":false}},{\"key\":\"transform-template-literals\",\"visitor\":{\"TaggedTemplateExpression\":{\"enter\":[null]},\"TemplateLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-literals\",\"visitor\":{\"NumericLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-function-name\",\"visitor\":{\"FunctionExpression\":{\"exit\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-arrow-functions\",\"visitor\":{\"ArrowFunctionExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-block-scoped-functions\",\"visitor\":{\"BlockStatement\":{\"enter\":[null]},\"SwitchCase\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-classes\",\"visitor\":{\"ExportDefaultDeclaration\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-object-super\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-shorthand-properties\",\"visitor\":{\"ObjectMethod\":{\"enter\":[null]},\"ObjectProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-duplicate-keys\",\"visitor\":{\"ObjectExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-computed-properties\",\"visitor\":{\"ObjectExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-for-of\",\"visitor\":{\"ForOfStatement\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-sticky-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-dotall-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-unicode-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-spread\",\"visitor\":{\"ArrayExpression\":{\"enter\":[null]},\"CallExpression\":{\"enter\":[null]},\"NewExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-parameters\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-destructuring\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"VariableDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-block-scoping\",\"visitor\":{\"VariableDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"_exploded\":true,\"BlockStatement\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"_verified\":true,\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-typeof-symbol\",\"visitor\":{\"UnaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true,\"BlockStatement\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"DoWhileStatement\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForStatement\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"Program\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"SwitchStatement\":{\"enter\":[null]},\"WhileStatement\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassDeclaration\":{\"enter\":[null]},\"ClassExpression\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"TSModuleBlock\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-new-target\",\"visitor\":{\"MetaProperty\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"regenerator-transform\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"ObjectMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassMethod\":{\"enter\":[null],\"exit\":[null]},\"ClassPrivateMethod\":{\"enter\":[null],\"exit\":[null]},\"FunctionDeclaration\":{\"exit\":[null]},\"FunctionExpression\":{\"exit\":[null]},\"ArrowFunctionExpression\":{\"exit\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-exponentiation-operator\",\"visitor\":{\"AssignmentExpression\":{\"enter\":[null]},\"BinaryExpression\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-async-to-generator\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-async-generator-functions\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"Program\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-object-rest-spread\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"VariableDeclarator\":{\"enter\":[null]},\"ExportNamedDeclaration\":{\"enter\":[null]},\"CatchClause\":{\"enter\":[null]},\"AssignmentExpression\":{\"enter\":[null]},\"ObjectExpression\":{\"enter\":[null]},\"FunctionDeclaration\":{\"enter\":[null]},\"FunctionExpression\":{\"enter\":[null]},\"ObjectMethod\":{\"enter\":[null]},\"ArrowFunctionExpression\":{\"enter\":[null]},\"ClassMethod\":{\"enter\":[null]},\"ClassPrivateMethod\":{\"enter\":[null]},\"ForInStatement\":{\"enter\":[null]},\"ForOfStatement\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-unicode-property-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-json-strings\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"DirectiveLiteral\":{\"enter\":[null]},\"StringLiteral\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"proposal-optional-catch-binding\",\"visitor\":{\"_exploded\":{},\"_verified\":{},\"CatchClause\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-member-expression-literals\",\"visitor\":{\"MemberExpression\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-property-literals\",\"visitor\":{\"ObjectProperty\":{\"exit\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}},{\"key\":\"transform-reserved-words\",\"visitor\":{\"_exploded\":true,\"_verified\":true,\"Identifier\":{\"enter\":[null,null]},\"JSXIdentifier\":{\"enter\":[null]}},\"options\":{\"spec\":false,\"loose\":false,\"useBuiltIns\":false}}],\"presets\":[]}:7.5.5": {
    "metadata": {},
    "options": {
      "sourceRoot": "/Users/lynss/frontProjects/algorithm/js_algorithm",
      "caller": {
        "name": "@babel/node"
      },
      "cwd": "/Users/lynss/frontProjects/algorithm/js_algorithm",
      "filename": "/Users/lynss/frontProjects/algorithm/js_algorithm/my-promise.js",
      "babelrc": false,
      "configFile": false,
      "envName": "development",
      "root": "/Users/lynss/frontProjects/algorithm/js_algorithm",
      "sourceMaps": "both",
      "ast": false,
      "passPerPreset": false,
      "plugins": [
        {
          "key": "proposal-class-properties",
          "visitor": {
            "PrivateName": {
              "enter": [
                null
              ]
            },
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            }
          },
          "options": {}
        },
        {
          "key": "transform-modules-commonjs",
          "visitor": {
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "proposal-dynamic-import",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "loose": false
          }
        },
        {
          "key": "transform-template-literals",
          "visitor": {
            "TaggedTemplateExpression": {
              "enter": [
                null
              ]
            },
            "TemplateLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-literals",
          "visitor": {
            "NumericLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-function-name",
          "visitor": {
            "FunctionExpression": {
              "exit": [
                null
              ]
            },
            "ObjectProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-arrow-functions",
          "visitor": {
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-block-scoped-functions",
          "visitor": {
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "SwitchCase": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-classes",
          "visitor": {
            "ExportDefaultDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-object-super",
          "visitor": {
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-shorthand-properties",
          "visitor": {
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ObjectProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-duplicate-keys",
          "visitor": {
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-computed-properties",
          "visitor": {
            "ObjectExpression": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-for-of",
          "visitor": {
            "ForOfStatement": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-sticky-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-dotall-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-unicode-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-spread",
          "visitor": {
            "ArrayExpression": {
              "enter": [
                null
              ]
            },
            "CallExpression": {
              "enter": [
                null
              ]
            },
            "NewExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-parameters",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-destructuring",
          "visitor": {
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-block-scoping",
          "visitor": {
            "VariableDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "SwitchStatement": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "_verified": true,
            "DoWhileStatement": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForStatement": {
              "enter": [
                null
              ]
            },
            "WhileStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-typeof-symbol",
          "visitor": {
            "UnaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true,
            "BlockStatement": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "DoWhileStatement": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForStatement": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "Program": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "SwitchStatement": {
              "enter": [
                null
              ]
            },
            "WhileStatement": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassDeclaration": {
              "enter": [
                null
              ]
            },
            "ClassExpression": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            },
            "TSModuleBlock": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-new-target",
          "visitor": {
            "MetaProperty": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "regenerator-transform",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "ObjectMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ],
              "exit": [
                null
              ]
            },
            "FunctionDeclaration": {
              "exit": [
                null
              ]
            },
            "FunctionExpression": {
              "exit": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "exit": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-exponentiation-operator",
          "visitor": {
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "BinaryExpression": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-async-to-generator",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-async-generator-functions",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "Program": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-object-rest-spread",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "VariableDeclarator": {
              "enter": [
                null
              ]
            },
            "ExportNamedDeclaration": {
              "enter": [
                null
              ]
            },
            "CatchClause": {
              "enter": [
                null
              ]
            },
            "AssignmentExpression": {
              "enter": [
                null
              ]
            },
            "ObjectExpression": {
              "enter": [
                null
              ]
            },
            "FunctionDeclaration": {
              "enter": [
                null
              ]
            },
            "FunctionExpression": {
              "enter": [
                null
              ]
            },
            "ObjectMethod": {
              "enter": [
                null
              ]
            },
            "ArrowFunctionExpression": {
              "enter": [
                null
              ]
            },
            "ClassMethod": {
              "enter": [
                null
              ]
            },
            "ClassPrivateMethod": {
              "enter": [
                null
              ]
            },
            "ForInStatement": {
              "enter": [
                null
              ]
            },
            "ForOfStatement": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-unicode-property-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-json-strings",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "DirectiveLiteral": {
              "enter": [
                null
              ]
            },
            "StringLiteral": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "proposal-optional-catch-binding",
          "visitor": {
            "_exploded": {},
            "_verified": {},
            "CatchClause": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-named-capturing-groups-regex",
          "visitor": {
            "RegExpLiteral": {
              "enter": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-member-expression-literals",
          "visitor": {
            "MemberExpression": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-property-literals",
          "visitor": {
            "ObjectProperty": {
              "exit": [
                null
              ]
            },
            "_exploded": true,
            "_verified": true
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        },
        {
          "key": "transform-reserved-words",
          "visitor": {
            "_exploded": true,
            "_verified": true,
            "Identifier": {
              "enter": [
                null,
                null
              ]
            },
            "JSXIdentifier": {
              "enter": [
                null
              ]
            }
          },
          "options": {
            "spec": false,
            "loose": false,
            "useBuiltIns": false
          }
        }
      ],
      "presets": [],
      "parserOpts": {
        "sourceType": "module",
        "sourceFileName": "/Users/lynss/frontProjects/algorithm/js_algorithm/my-promise.js",
        "plugins": [
          "classProperties",
          "classPrivateProperties",
          "dynamicImport",
          "asyncGenerators",
          "objectRestSpread",
          "jsonStrings",
          "optionalCatchBinding"
        ]
      },
      "generatorOpts": {
        "filename": "/Users/lynss/frontProjects/algorithm/js_algorithm/my-promise.js",
        "comments": true,
        "compact": "auto",
        "sourceMaps": "both",
        "sourceRoot": "/Users/lynss/frontProjects/algorithm/js_algorithm",
        "sourceFileName": "my-promise.js"
      }
    },
    "ast": null,
    "code": "\"use strict\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PENDING = Symbol('pending');\nvar FULFILLED = Symbol('fulfilled');\nvar REJECTED = Symbol('rejected');\n\nvar MyPromise =\n/*#__PURE__*/\nfunction () {\n  _createClass(MyPromise, [{\n    key: \"onResolve\",\n    value: function onResolve(value) {\n      console.warn(this);\n\n      if (this._status === PENDING) {\n        this._status = FULFILLED;\n        this._value = value;\n        this.onResolveCallbacks.forEach(function (onResolveCallback) {\n          return onResolveCallback();\n        });\n      }\n    }\n  }, {\n    key: \"onReject\",\n    value: function onReject(value) {\n      if (this._status === PENDING) {\n        this._status = REJECTED;\n        this._value = value;\n        this.onRejectCallbacks.forEach(function (onRejectCallback) {\n          return onRejectCallback();\n        });\n      }\n    }\n  }]);\n\n  function MyPromise(executor) {\n    _classCallCheck(this, MyPromise);\n\n    _defineProperty(this, \"_status\", void 0);\n\n    _defineProperty(this, \"_value\", void 0);\n\n    _defineProperty(this, \"onResolveCallbacks\", []);\n\n    _defineProperty(this, \"onRejectCallbacks\", []);\n\n    this._status = PENDING;\n\n    try {\n      executor(this.onResolve, this.onReject);\n    } catch (e) {\n      this.onReject(e);\n    }\n  }\n\n  _createClass(MyPromise, [{\n    key: \"flatPromise\",\n    value: function flatPromise(targetResult) {\n      var self = this;\n\n      if (self === targetResult) {\n        self.onReject('循环引用');\n        return;\n      }\n\n      var targetType = Object.prototype.toString.call(targetResult);\n\n      if (targetType !== '[object Function]' && targetType !== '[object Object]') {\n        self.onResolve(targetResult);\n        return;\n      }\n\n      var then = self.then;\n\n      if (typeof then !== 'function') {\n        self.onResolve(targetResult);\n        return;\n      }\n\n      try {\n        then.call(self, function (value) {\n          self.flatPromise(value);\n        });\n      } catch (e) {\n        self.onReject(e);\n      }\n    }\n  }, {\n    key: \"then\",\n    value: function then(onResolve, onReject) {\n      var _this = this;\n\n      var onFulfilled = typeof onResolve === 'function' ? onResolve : function (value) {\n        return value;\n      }; //因为错误的值要让后面访问到，所以这里也要跑出个错误，不然会在之后then的resolve中捕获\n\n      var onRejected = typeof onReject === 'function' ? onReject : function (err) {\n        throw err;\n      };\n      var self = this;\n      var thenPromise = new MyPromise(function (resolve, reject) {\n        if (self._status === PENDING) {\n          self.onResolveCallbacks.push(function () {\n            setTimeout(function () {\n              try {\n                var result = onFulfilled(_this._value);\n                thenPromise.flatPromise(result);\n              } catch (e) {\n                reject(e);\n              }\n            });\n          });\n          self.onRejectCallbacks.push(function () {\n            setTimeout(function () {\n              try {\n                var result = onRejected(_this._value);\n                thenPromise.flatPromise(result);\n              } catch (e) {\n                reject(e);\n              }\n            });\n          });\n        } else if (thenPromise._status === FULFILLED) {\n          setTimeout(function () {\n            try {\n              var result = onFulfilled(_this._value);\n              thenPromise.flatPromise(result);\n            } catch (e) {\n              reject(e);\n            }\n          });\n        } else if (thenPromise._status === REJECTED) {\n          setTimeout(function () {\n            try {\n              var result = onRejected(_this._value);\n              thenPromise.flatPromise(result);\n            } catch (e) {\n              reject(e);\n            }\n          });\n        }\n      });\n      return thenPromise;\n    }\n  }, {\n    key: \"finally\",\n    value: function _finally(fn) {\n      return this.then(function (value) {\n        fn();\n        return value;\n      }, function (reason) {\n        fn();\n        throw reason;\n      });\n    }\n  }], [{\n    key: \"resolve\",\n    value: function resolve(value) {\n      return new MyPromise(function (resolve) {\n        resolve(value);\n      });\n    }\n  }, {\n    key: \"reject\",\n    value: function reject(value) {\n      return new MyPromise(function (resolve, reject) {\n        reject(value);\n      });\n    }\n  }]);\n\n  return MyPromise;\n}();\n\nvar promiseOne = new MyPromise(function (resolve, reject) {\n  setTimeout(function () {\n    if (Math.random() > 0.5) {\n      resolve('success');\n    } else {\n      reject('error');\n    }\n  });\n});\npromiseOne.then(console.warn.bind(console), console.error.bind(console))[\"finally\"](function () {\n  return console.info('finally');\n});\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm15LXByb21pc2UuanMiXSwibmFtZXMiOlsiUEVORElORyIsIlN5bWJvbCIsIkZVTEZJTExFRCIsIlJFSkVDVEVEIiwiTXlQcm9taXNlIiwidmFsdWUiLCJjb25zb2xlIiwid2FybiIsIl9zdGF0dXMiLCJfdmFsdWUiLCJvblJlc29sdmVDYWxsYmFja3MiLCJmb3JFYWNoIiwib25SZXNvbHZlQ2FsbGJhY2siLCJvblJlamVjdENhbGxiYWNrcyIsIm9uUmVqZWN0Q2FsbGJhY2siLCJleGVjdXRvciIsIm9uUmVzb2x2ZSIsIm9uUmVqZWN0IiwiZSIsInRhcmdldFJlc3VsdCIsInNlbGYiLCJ0YXJnZXRUeXBlIiwiT2JqZWN0IiwicHJvdG90eXBlIiwidG9TdHJpbmciLCJjYWxsIiwidGhlbiIsImZsYXRQcm9taXNlIiwib25GdWxmaWxsZWQiLCJvblJlamVjdGVkIiwiZXJyIiwidGhlblByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHVzaCIsInNldFRpbWVvdXQiLCJyZXN1bHQiLCJmbiIsInJlYXNvbiIsInByb21pc2VPbmUiLCJNYXRoIiwicmFuZG9tIiwiYmluZCIsImVycm9yIiwiaW5mbyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBLElBQU1BLE9BQU8sR0FBR0MsTUFBTSxDQUFDLFNBQUQsQ0FBdEI7QUFDQSxJQUFNQyxTQUFTLEdBQUdELE1BQU0sQ0FBQyxXQUFELENBQXhCO0FBQ0EsSUFBTUUsUUFBUSxHQUFHRixNQUFNLENBQUMsVUFBRCxDQUF2Qjs7SUFFTUcsUzs7Ozs7OEJBTVFDLEssRUFBTztBQUNiQyxNQUFBQSxPQUFPLENBQUNDLElBQVIsQ0FBYSxJQUFiOztBQUNBLFVBQUksS0FBS0MsT0FBTCxLQUFpQlIsT0FBckIsRUFBOEI7QUFDMUIsYUFBS1EsT0FBTCxHQUFlTixTQUFmO0FBQ0EsYUFBS08sTUFBTCxHQUFjSixLQUFkO0FBQ0EsYUFBS0ssa0JBQUwsQ0FBd0JDLE9BQXhCLENBQWdDLFVBQUFDLGlCQUFpQjtBQUFBLGlC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InNvdXJjZVJvb3QiOiIvVXNlcnMvbHluc3MvZnJvbnRQcm9qZWN0cy9hbGdvcml0aG0vanNfYWxnb3JpdGhtIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgUEVORElORyA9IFN5bWJvbCgncGVuZGluZycpO1xuY29uc3QgRlVMRklMTEVEID0gU3ltYm9sKCdmdWxmaWxsZWQnKTtcbmNvbnN0IFJFSkVDVEVEID0gU3ltYm9sKCdyZWplY3RlZCcpO1xuXG5jbGFzcyBNeVByb21pc2Uge1xuICAgIF9zdGF0dXM7XG4gICAgX3ZhbHVlO1xuICAgIG9uUmVzb2x2ZUNhbGxiYWNrcyA9IFtdO1xuICAgIG9uUmVqZWN0Q2FsbGJhY2tzID0gW107XG5cbiAgICBvblJlc29sdmUodmFsdWUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKHRoaXMpO1xuICAgICAgICBpZiAodGhpcy5fc3RhdHVzID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBGVUxGSUxMRUQ7XG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgdGhpcy5vblJlc29sdmVDYWxsYmFja3MuZm9yRWFjaChvblJlc29sdmVDYWxsYmFjayA9PiBvblJlc29sdmVDYWxsYmFjaygpKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBvblJlamVjdCh2YWx1ZSkge1xuICAgICAgICBpZiAodGhpcy5fc3RhdHVzID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgICB0aGlzLl9zdGF0dXMgPSBSRUpFQ1RFRDtcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgICB0aGlzLm9uUmVqZWN0Q2FsbGJhY2tzLmZvckVhY2gob25SZWplY3RDYWxsYmFjayA9PiBvblJlamVjdENhbGxiYWNrKCkpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGNvbnN0cnVjdG9yKGV4ZWN1dG9yKSB7XG4gICAgICAgIHRoaXMuX3N0YXR1cyA9IFBFTkRJTkc7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBleGVjdXRvcih0aGlzLm9uUmVzb2x2ZSwgdGhpcy5vblJlamVjdCk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRoaXMub25SZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmbGF0UHJvbWlzZSh0YXJnZXRSZXN1bHQpIHtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmID09PSB0YXJnZXRSZXN1bHQpIHtcbiAgICAgICAgICAgIHNlbGYub25SZWplY3QoJ+W+queOr+W8leeUqCcpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldFR5cGUgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGFyZ2V0UmVzdWx0KTtcbiAgICAgICAgaWYgKHRhcmdldFR5cGUgIT09ICdbb2JqZWN0IEZ1bmN0aW9uXScgJiYgdGFyZ2V0VHlwZSAhPT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAgICAgIHNlbGYub25SZXNvbHZlKHRhcmdldFJlc3VsdCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgdGhlbiA9IHNlbGYudGhlbjtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBzZWxmLm9uUmVzb2x2ZSh0YXJnZXRSZXN1bHQpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGVuLmNhbGwoc2VsZiwgdmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgIHNlbGYuZmxhdFByb21pc2UodmFsdWUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHNlbGYub25SZWplY3QoZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGVuKG9uUmVzb2x2ZSwgb25SZWplY3QpIHtcbiAgICAgICAgY29uc3Qgb25GdWxmaWxsZWQgPSB0eXBlb2Ygb25SZXNvbHZlID09PSAnZnVuY3Rpb24nID8gb25SZXNvbHZlIDogdmFsdWUgPT4gdmFsdWU7XG4gICAgICAgIC8v5Zug5Li66ZSZ6K+v55qE5YC86KaB6K6p5ZCO6Z2i6K6/6Zeu5Yiw77yM5omA5Lul6L+Z6YeM5Lmf6KaB6LeR5Ye65Liq6ZSZ6K+v77yM5LiN54S25Lya5Zyo5LmL5ZCOdGhlbueahHJlc29sdmXkuK3mjZXojrdcbiAgICAgICAgY29uc3Qgb25SZWplY3RlZCA9IHR5cGVvZiBvblJlamVjdCA9PT0gJ2Z1bmN0aW9uJyA/IG9uUmVqZWN0IDogZXJyID0+IHtcbiAgICAgICAgICAgIHRocm93IGVycjtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHRoZW5Qcm9taXNlID0gbmV3IE15UHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICBpZiAoc2VsZi5fc3RhdHVzID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5vblJlc29sdmVDYWxsYmFja3MucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvbkZ1bGZpbGxlZCh0aGlzLl92YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlblByb21pc2UuZmxhdFByb21pc2UocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHNlbGYub25SZWplY3RDYWxsYmFja3MucHVzaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvblJlamVjdGVkKHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGVuUHJvbWlzZS5mbGF0UHJvbWlzZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoZW5Qcm9taXNlLl9zdGF0dXMgPT09IEZVTEZJTExFRCkge1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gb25GdWxmaWxsZWQodGhpcy5fdmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhlblByb21pc2UuZmxhdFByb21pc2UocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRoZW5Qcm9taXNlLl9zdGF0dXMgPT09IFJFSkVDVEVEKSB7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBvblJlamVjdGVkKHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW5Qcm9taXNlLmZsYXRQcm9taXNlKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIHRoZW5Qcm9taXNlO1xuICAgIH1cblxuICAgIGZpbmFsbHkoZm4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGhlbih2YWx1ZSA9PiB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9LCByZWFzb24gPT4ge1xuICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHN0YXRpYyByZXNvbHZlKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiBuZXcgTXlQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3RhdGljIHJlamVjdCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gbmV3IE15UHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgICAgICByZWplY3QodmFsdWUpO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmNvbnN0IHByb21pc2VPbmUgPSBuZXcgTXlQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmIChNYXRoLnJhbmRvbSgpID4gMC41KSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgnc3VjY2VzcycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QoJ2Vycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgKTtcbn0pO1xuXG5wcm9taXNlT25lLnRoZW4oY29uc29sZS53YXJuLmJpbmQoY29uc29sZSksIGNvbnNvbGUuZXJyb3IuYmluZChjb25zb2xlKSkuZmluYWxseSgoKSA9PiBjb25zb2xlLmluZm8oJ2ZpbmFsbHknKSk7Il19",
    "map": {
      "version": 3,
      "sources": [
        "my-promise.js"
      ],
      "names": [
        "PENDING",
        "Symbol",
        "FULFILLED",
        "REJECTED",
        "MyPromise",
        "value",
        "console",
        "warn",
        "_status",
        "_value",
        "onResolveCallbacks",
        "forEach",
        "onResolveCallback",
        "onRejectCallbacks",
        "onRejectCallback",
        "executor",
        "onResolve",
        "onReject",
        "e",
        "targetResult",
        "self",
        "targetType",
        "Object",
        "prototype",
        "toString",
        "call",
        "then",
        "flatPromise",
        "onFulfilled",
        "onRejected",
        "err",
        "thenPromise",
        "resolve",
        "reject",
        "push",
        "setTimeout",
        "result",
        "fn",
        "reason",
        "promiseOne",
        "Math",
        "random",
        "bind",
        "error",
        "info"
      ],
      "mappings": "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",
      "sourceRoot": "/Users/lynss/frontProjects/algorithm/js_algorithm",
      "sourcesContent": [
        "const PENDING = Symbol('pending');\nconst FULFILLED = Symbol('fulfilled');\nconst REJECTED = Symbol('rejected');\n\nclass MyPromise {\n    _status;\n    _value;\n    onResolveCallbacks = [];\n    onRejectCallbacks = [];\n\n    onResolve(value) {\n        console.warn(this);\n        if (this._status === PENDING) {\n            this._status = FULFILLED;\n            this._value = value;\n            this.onResolveCallbacks.forEach(onResolveCallback => onResolveCallback());\n        }\n    };\n\n    onReject(value) {\n        if (this._status === PENDING) {\n            this._status = REJECTED;\n            this._value = value;\n            this.onRejectCallbacks.forEach(onRejectCallback => onRejectCallback());\n        }\n    };\n\n    constructor(executor) {\n        this._status = PENDING;\n        try {\n            executor(this.onResolve, this.onReject);\n        } catch (e) {\n            this.onReject(e);\n        }\n    }\n\n    flatPromise(targetResult) {\n        const self = this;\n        if (self === targetResult) {\n            self.onReject('循环引用');\n            return;\n        }\n        const targetType = Object.prototype.toString.call(targetResult);\n        if (targetType !== '[object Function]' && targetType !== '[object Object]') {\n            self.onResolve(targetResult);\n            return;\n        }\n        const then = self.then;\n        if (typeof then !== 'function') {\n            self.onResolve(targetResult);\n            return;\n        }\n        try {\n            then.call(self, value => {\n                self.flatPromise(value);\n            });\n        } catch (e) {\n            self.onReject(e);\n        }\n    }\n\n    then(onResolve, onReject) {\n        const onFulfilled = typeof onResolve === 'function' ? onResolve : value => value;\n        //因为错误的值要让后面访问到，所以这里也要跑出个错误，不然会在之后then的resolve中捕获\n        const onRejected = typeof onReject === 'function' ? onReject : err => {\n            throw err;\n        };\n        const self = this;\n        const thenPromise = new MyPromise((resolve, reject) => {\n            if (self._status === PENDING) {\n                self.onResolveCallbacks.push(() => {\n                    setTimeout(() => {\n                        try {\n                            const result = onFulfilled(this._value);\n                            thenPromise.flatPromise(result);\n                        } catch (e) {\n                            reject(e);\n                        }\n                    });\n                });\n                self.onRejectCallbacks.push(() => {\n                    setTimeout(() => {\n                        try {\n                            const result = onRejected(this._value);\n                            thenPromise.flatPromise(result);\n                        } catch (e) {\n                            reject(e);\n                        }\n                    });\n                });\n            } else if (thenPromise._status === FULFILLED) {\n                setTimeout(() => {\n                    try {\n                        const result = onFulfilled(this._value);\n                        thenPromise.flatPromise(result);\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            } else if (thenPromise._status === REJECTED) {\n                setTimeout(() => {\n                    try {\n                        const result = onRejected(this._value);\n                        thenPromise.flatPromise(result);\n                    } catch (e) {\n                        reject(e);\n                    }\n                });\n            }\n        });\n        return thenPromise;\n    }\n\n    finally(fn) {\n        return this.then(value => {\n            fn();\n            return value;\n        }, reason => {\n            fn();\n            throw reason;\n        });\n    };\n\n    static resolve(value) {\n        return new MyPromise((resolve) => {\n            resolve(value);\n        });\n    }\n\n    static reject(value) {\n        return new MyPromise((resolve, reject) => {\n            reject(value);\n        });\n    }\n}\n\nconst promiseOne = new MyPromise((resolve, reject) => {\n    setTimeout(() => {\n            if (Math.random() > 0.5) {\n                resolve('success');\n            } else {\n                reject('error');\n            }\n        },\n    );\n});\n\npromiseOne.then(console.warn.bind(console), console.error.bind(console)).finally(() => console.info('finally'));"
      ]
    },
    "sourceType": "script",
    "mtime": 1565748793382
  }
}